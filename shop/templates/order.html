{% extends "base.html" %}
{% block title %}Register Page{% endblock %}
<!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<!-- Custom fonts for this template-->
<link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
<link
    href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
    rel="stylesheet">
<body >
{% block content %}
{% for message in get_flashed_messages() %}

<div class="alert alert-success alert-dismissible fade show" role="alert">
  {{message}}
  <button type="button" class="btn-close" data-dismiss="alert" aria-label="Close"></button>
</div>

{% endfor %}
<h1 class="display-4">Orders</h1>
<div>
  {% if count == 0 %}
  <p>There are no orders.</p>
  {% elif count == 1 %}
  <p>There is 1 order.</p>
  {% else %}
  <p>There are {{ count }} orders.</p>
  {% endif %}
</div>
<form>
  <div class="d-none d-sm-inline-block form-inline navbar-search " style='padding-bottom: 20px;'>
  <div class="input-group">
      <input type="text" class="form-control bg-light border-0 small" placeholder="Order ID..."
         aria-label="Search" aria-describedby="basic-addon2">
     <div class="input-group-append">
          <button class="btn btn-primary" type="button">
              <i class="fas fa-search fa-sm"></i>
          </button>
     </div>
  </div>
  </div>
</form>
<div>
  
  <table class="table ">
    <thead>
      <tr>
        <th>Order Id</th>
        <th>Name</th>
        <th>Email</th>
        <th>Status</th>
        <th>Date of Creation</th>
        <th>Operations</th>
      </tr>
    </thead>
    <tbody>
      {% for order in cust_order_list %}
      <tr>
        <td id='order_id' >{{ order.get_custOrder_id()}}</td>
        <td >{{ order.get_first_name() }} {{order.get_last_name()}}</td>
        <td>{{ order.get_email() }}</td>
        
        
        <td>
          <h5 class="" style="font-size: 15px;" id='Status' >{{ order.get_status() }}</h5>
        </td>
        <td>{{ order.get_create_date() }}</td>
        <td class="row">
          <div class="col-2">
            <form action="{{url_for('update_order', id = order.get_custOrder_id())}}"  method="POST">
              <!-- Button to Open the Modal -->
              
              <button type="submit" class='btn btn-primary'  data-bs-target="#myModal_{{order.get_custOrder_id()}}" title="Edit">
                <i class="fas fa-pencil-alt"></i>
              </button>
              
              
            </form>
          </div>
          
          <div class="col-2">
            <form action="{{url_for('refund_order', id = order.get_custOrder_id())}}"  method="POST">
            
              <!-- Button to Open the Modal -->
              <button type="button"  class='btn btn-warning' data-bs-toggle="modal" data-bs-target="#myModal_1{{order.get_custOrder_id()}}" title='Refund' >
                <i class="fas fa-hand-holding-usd" alt='refund'></i>
              </button>
    
              <!-- The Modal -->
              <div class="modal" id="myModal_1{{order.get_custOrder_id()}}">
                <div class="modal-dialog">
                  <div class="modal-content">
    
                    <!-- Modal Header -->
                    <div class="modal-header">
                      <h4 class="modal-title">Refund Confirmation</h4>
                      <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
    
                    <!-- Modal body -->
                    <div class="modal-body">
                      Are you sure you want to Refund Order ID {{order.get_custOrder_id()}}?
                    </div>
    
                    <!-- Modal footer -->
                    <div class="modal-footer">
                      <input type="submit" value="Refund" class="btn btn-warning">
                      
                      <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
                    </div>
    
                  </div>
                </div>
              </div>
            </form>
          </div>
          
          <div class="col-2">
            <form action="{{url_for('delete_order', id = order.get_custOrder_id())}}"  method="POST">
            
              <!-- Button to Open the Modal -->
              <button type="button" class='btn btn-danger' data-bs-toggle="modal" data-bs-target="#myModal_{{order.get_custOrder_id()}}" title='Delete'>
                <i class="fas fa-trash"></i>
              </button>
              
              
              <!-- The Modal -->
              <div class="modal" id="myModal_{{order.get_custOrder_id()}}">
                <div class="modal-dialog">
                  <div class="modal-content">
  
                    <!-- Modal Header -->
                    <div class="modal-header">
                      <h4 class="modal-title">Delete Confirmation</h4>
                      <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
  
                    <!-- Modal body -->
                    <div class="modal-body">
                      Are you sure you want to delete {{order.get_first_name()}} {{order.get_last_name()}}?
                    </div>
  
                    <!-- Modal footer -->
                    <div class="modal-footer">
                      <input type="submit" value="Delete" class="btn btn-danger">
                      
                      <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
                    </div>
  
                  </div>
                </div>
              </div>
            </form>
          </div>
          <div class="col-2">
            
            
              <!-- Button to Open the Modal -->
              <button type="button" class='btn btn-secondary' data-bs-toggle="modal" data-bs-target="#myModal_2{{order.get_custOrder_id()}}" title='Delete'>
                <i class="fas fa-eye"></i>
              </button>
              
              
              <!-- The Modal -->
              <div class="modal" id="myModal_2{{order.get_custOrder_id()}}">
                <div class="modal-dialog">
                  <div class="modal-content">
  
                    <!-- Modal Header -->
                    <div class="modal-header">
                      <h4 class="modal-title">Information</h4>
                      <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
  
                    <!-- Modal body -->
                    <div class="modal-body">
                      <div class="card" style="width: 28rem;">
                        <img src="..." class="card-img-top" alt="...">
                        <div class="card-body">
                          <h5 class="card-title">Card title</h5>
                          <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                          <a href="#" class="btn btn-primary">Go somewhere</a>
                        </div>
                        <div class="card-body">
                          <p class="card-text">Created On: {{order.get_create_date()}}</p>
                          <p class="card-text">Modified On: {{order.get_modified_date()}}</p>
                          <p class="card-text">Modified By: {{order.get_modified_by()}}</p>
                          
                        </div>
                      </div>
  
                    </div>
  
                    <!-- Modal footer -->
                    <div class="modal-footer">
                      
                      
                      <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
                    </div>
  
                  </div>
                </div>
              </div>
              
              </div>
          </div>
          
          
           
        </td>
        
      </tr>
    {% endfor %}
    
    </tbody>
  </table>
</div>






    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <!-- Bootstrap core JavaScript-->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/jquery/jquery.slim.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- Core plugin JavaScript-->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>
    
    <!-- Custom scripts for all pages-->
    <script src="js/sb-admin-2.min.js"></script>

    <!-- <script src= '../static/js/status.js'></script> -->
    
   
      

</body>

{% endblock %}